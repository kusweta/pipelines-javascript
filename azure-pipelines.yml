# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
- master

pool:
  vmImage: ubuntu-latest

steps:
- task: NodeTool@0
  inputs:
    versionSpec: '12'
  displayName: 'Install Node.js'

- task: AzureLoadTest@1
  inputs:
    azureSubscription: 'myorgsvc'
    YAMLFilePath: 'TmpFiles/loadTest.yaml'
    secrets: |
      [
         {
          "name": "key1",
          "value": "(secret1)"
         },
         {
          "name": "key2",
          "value": "(secret2)"
         }
      ]
    env: |
      [
         {
          "name": "env1",
          "value": "value1"
         },
         {
          "name": "env2",
          "value": "value2"
         }
      ]
    resourceGroup: 'requestworkerdev'
    loadtestResource: 'cloudtestres'