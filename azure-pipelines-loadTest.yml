# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
- master

pool:
  vmImage: ubuntu-latest

steps:
- task: NodeTool@0
  inputs:
    versionSpec: '12'
  displayName: 'Install Node.js'

- task: loadTest@1
  inputs:
    tenantId: '$(tenantId)'
    yamlFile: 'loadTest.yaml'
    subscription: '$(azureSubscription)'
    loadTestRes: 'cloudtestres'
    resourcegroup: 'requestworkerdev'
    monitor: |
      resourceId: /subscriptions/7c71b563-0dc0-4bc0-bcf6-06f8f0516c7a/resourceGroups/abhi-azload/providers/Microsoft.Storage/storageAccounts/abhiazload
      resourceName: Storage Account
    apikey: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5PbzNaRHJPRFhFSzFqS1doWHNsSFJfS1hFZyIsImtpZCI6Im5PbzNaRHJPRFhFSzFqS1doWHNsSFJfS1hFZyJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRiNDcvIiwiaWF0IjoxNjMwNjYwNTE4LCJuYmYiOjE2MzA2NjA1MTgsImV4cCI6MTYzMDY2NDQxOCwiX2NsYWltX25hbWVzIjp7Imdyb3VwcyI6InNyYzEifSwiX2NsYWltX3NvdXJjZXMiOnsic3JjMSI6eyJlbmRwb2ludCI6Imh0dHBzOi8vZ3JhcGgud2luZG93cy5uZXQvNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3L3VzZXJzL2I0MmNjZGE3LWFiYWUtNGNkNi1hOWM4LTNjMzg0OTA2NDhlNy9nZXRNZW1iZXJPYmplY3RzIn19LCJhY3IiOiIxIiwiYWlvIjoiQVVRQXUvOFRBQUFBcDZUbG4yUTZsT3BaY0t3SlBjWUpqUTNzOS9hcTNhVUoxdUNCS0FzUjlZdklndHdKZTRYeGl6Z3gyTXRZWTc5b0VkTUhIV0wzN0VkZTJFZU1hVlNLb1E9PSIsImFtciI6WyJyc2EiLCJtZmEiXSwiYXBwaWQiOiIwNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDYiLCJhcHBpZGFjciI6IjAiLCJkZXZpY2VpZCI6IjkwODFhNDNkLTQ4ODMtNGQxZC05NWY3LWUwMzEwYTg0ZjQ1ZSIsImZhbWlseV9uYW1lIjoiS3VtYXJpIiwiZ2l2ZW5fbmFtZSI6IlN3ZXRhIiwiaXBhZGRyIjoiMTAzLjYxLjExMy43MSIsIm5hbWUiOiJTd2V0YSBLdW1hcmkiLCJvaWQiOiJiNDJjY2RhNy1hYmFlLTRjZDYtYTljOC0zYzM4NDkwNjQ4ZTciLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtMjE0Njc3MzA4NS05MDMzNjMyODUtNzE5MzQ0NzA3LTI3MTQyMzkiLCJwdWlkIjoiMTAwMzIwMDEyRUVGQjZCMCIsInJoIjoiMC5BUm9BdjRqNWN2R0dyMEdScXkxODBCSGJSNVYzc0FUYmpScEd1LTRDLWVHX2UwWWFBSXcuIiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoiSC1ob2E2UTVXTmlvUXJzaHJsb0RTaEJub280Q1pYUGN6TjFpVjdITHVSWSIsInRpZCI6IjcyZjk4OGJmLTg2ZjEtNDFhZi05MWFiLTJkN2NkMDExZGI0NyIsInVuaXF1ZV9uYW1lIjoic3dldGFrdW1hcmlAbWljcm9zb2Z0LmNvbSIsInVwbiI6InN3ZXRha3VtYXJpQG1pY3Jvc29mdC5jb20iLCJ1dGkiOiJmT3pYdU5sZjBrQ3NzRDYwalNRT0FBIiwidmVyIjoiMS4wIiwid2lkcyI6WyJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXSwieG1zX3RjZHQiOjEyODkyNDE1NDd9.YpuvO4NYKMQA2eWtPheSDTf9F8ajKcjZIYNF0h2LMDvxOK_delEc5izuZg8PKQjLnY5zORUKb7bDhXDZOhZ7Db3F8lC0prcK64F_ZNKpNOlAdLCygefvaHMRX4h60-9B11-WQBtWcidzuqmtBU9VkO_9kfjwJCefUYlGi2h0K1vQLE1oOSjNDRjsWf2ajHpjh1gGpAC8YuU2MxbHUxXo07g3Mvw_4_8A89V6KTlcxtXRZKrSgss_DlyDFcfnKnduEVm4qWSj8ljIIUkpJGQ_dUMwZCkcX1K9t6UOjgbrlSh2H0H2J2JBWBv5-80J0mMRf2pIHlquIN5yP-W3KHYWYw'
