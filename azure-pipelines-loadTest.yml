# Node.js
# Build a general Node.js project with npm.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
- master

pool:
  vmImage: ubuntu-latest

steps:
- task: NodeTool@0
  inputs:
    versionSpec: '12'
  displayName: 'Install Node.js'

- task: loadTest@1
  inputs:
    tenantId: '$(tenantId)'
    yamlFile: 'loadTest.yaml'
    subscription: '$(azureSubscription)'
    loadTestRes: 'cloudtestres'
    resourcegroup: 'requestworkerdev'
    monitor: |
      resourceId: /subscriptions/7c71b563-0dc0-4bc0-bcf6-06f8f0516c7a/resourceGroups/abhi-azload/providers/Microsoft.Storage/storageAccounts/abhiazload
      resourceName: Storage Account
    apikey: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5PbzNaRHJPRFhFSzFqS1doWHNsSFJfS1hFZyIsImtpZCI6Im5PbzNaRHJPRFhFSzFqS1doWHNsSFJfS1hFZyJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRiNDcvIiwiaWF0IjoxNjMwNjU2MjAxLCJuYmYiOjE2MzA2NTYyMDEsImV4cCI6MTYzMDY2MDEwMSwiX2NsYWltX25hbWVzIjp7Imdyb3VwcyI6InNyYzEifSwiX2NsYWltX3NvdXJjZXMiOnsic3JjMSI6eyJlbmRwb2ludCI6Imh0dHBzOi8vZ3JhcGgud2luZG93cy5uZXQvNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3L3VzZXJzL2I0MmNjZGE3LWFiYWUtNGNkNi1hOWM4LTNjMzg0OTA2NDhlNy9nZXRNZW1iZXJPYmplY3RzIn19LCJhY3IiOiIxIiwiYWlvIjoiQVVRQXUvOFRBQUFBZ3dDSnFSak40MXhaQ28rZUxLR2FYN1NwbG5Hc0FWVFJxWGc3K1Nvd2I0THpXZmN1bFJHYzRzS3dvcms2bXFUd0hkNEJDSnFoMGpJQ285UGZDNklxSHc9PSIsImFtciI6WyJyc2EiLCJtZmEiXSwiYXBwaWQiOiIwNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDYiLCJhcHBpZGFjciI6IjAiLCJkZXZpY2VpZCI6IjkwODFhNDNkLTQ4ODMtNGQxZC05NWY3LWUwMzEwYTg0ZjQ1ZSIsImZhbWlseV9uYW1lIjoiS3VtYXJpIiwiZ2l2ZW5fbmFtZSI6IlN3ZXRhIiwiaXBhZGRyIjoiMTAzLjYxLjExMy43MSIsIm5hbWUiOiJTd2V0YSBLdW1hcmkiLCJvaWQiOiJiNDJjY2RhNy1hYmFlLTRjZDYtYTljOC0zYzM4NDkwNjQ4ZTciLCJvbnByZW1fc2lkIjoiUy0xLTUtMjEtMjE0Njc3MzA4NS05MDMzNjMyODUtNzE5MzQ0NzA3LTI3MTQyMzkiLCJwdWlkIjoiMTAwMzIwMDEyRUVGQjZCMCIsInJoIjoiMC5BUm9BdjRqNWN2R0dyMEdScXkxODBCSGJSNVYzc0FUYmpScEd1LTRDLWVHX2UwWWFBSXcuIiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoiSC1ob2E2UTVXTmlvUXJzaHJsb0RTaEJub280Q1pYUGN6TjFpVjdITHVSWSIsInRpZCI6IjcyZjk4OGJmLTg2ZjEtNDFhZi05MWFiLTJkN2NkMDExZGI0NyIsInVuaXF1ZV9uYW1lIjoic3dldGFrdW1hcmlAbWljcm9zb2Z0LmNvbSIsInVwbiI6InN3ZXRha3VtYXJpQG1pY3Jvc29mdC5jb20iLCJ1dGkiOiJ2ZzhmM1VrZ2pFV1VueFZfdEpBR0FBIiwidmVyIjoiMS4wIiwid2lkcyI6WyJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXSwieG1zX3RjZHQiOjEyODkyNDE1NDd9.WfdVlOd1RfkufQOR_S3BDZgpWyGQHTfXo07v086oqP3zb5JJyRmMoA4QyCTTYMeeOmusXZfWl3wlSAXCDbr6jR2PkKetuxoaN-YIdLnnrBjiw3rdF-4UFI83zyhs8V8Mo3KrVLQ3F5jY0ImV-zN-HJ1IMa5wfbXt3qTEKhKX_YRv_Qu1S7Qo4ptSfUOX6BjlR0eN7BbrzZK5sZvp3UYIP3ZE4zik_b-oc2qRPNPboxgTZARYRZNsS4FtU1NuxFpMi782ytpO_YpyBm0jEESusOXYqgFQCOXfnHAsPSzDEel6tUAk690URX-xa4QGZ_yf0NevxUrQUUCTLkqX0KZsIg'
